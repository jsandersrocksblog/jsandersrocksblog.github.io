---
id: 1273
title: 400 Error from WebService using .NET 2.0 and PreAuthenticate
date: 2007-10-17T15:53:00-05:00
author: jsanders
layout: post
guid: http://jsandersblog.azurewebsites.net/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/
permalink: /2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/
orig_url:
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
orig_site_id:
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
orig_post_id:
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
orig_parent_id:
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
  - "5498241"
orig_thread_id:
  - "541319"
  - "541319"
  - "541319"
  - "541319"
  - "541319"
  - "541319"
  - "541319"
  - "541319"
  - "541319"
  - "541319"
orig_application_key:
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
orig_post_author_id:
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
orig_post_author_username:
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
orig_post_author_created:
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
orig_is_approved:
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
orig_attachment_count:
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
orig_url_title:
  - http://blogs.msdn.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate.aspx
opengraph_tags:
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta name="twitter:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta name="twitter:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta name="twitter:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta name="twitter:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta name="twitter:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta name="twitter:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta name="twitter:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta name="twitter:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta name="twitter:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="400 Error from WebService using .NET 2.0 and PreAuthenticate" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2007/10/17/400-error-from-webservice-using-net-2-0-and-preauthenticate/" />
    <meta name="twitter:description" content="Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this. Problem======WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request” Symptoms=============================Consuming a WebService that&nbsp;uses Basic Authentication..." />
    
categories:
  - Uncategorized
tags:
  - HttpWebRequest
  - System.Net
---
Prashant from my team&nbsp;found this interesting issue.&nbsp; I will blog it here until the KB comes out on this.

Problem  
======  
WebService server responds back with a HTTP 400 error when using PreAuthenticate on the WebServiceProxy class.&nbsp; This results in a System.Net.WebException: “The request failed with HTTP status 400: Bad Request”

Symptoms  
=============================  
Consuming a WebService that&nbsp;uses Basic Authentication from a .Net 2.0 client through a Proxy&nbsp;using NTLM authentication the&nbsp;WebService server responds back with a HTTP 400 error message.&nbsp; This happens only when using the PreAuthenticate property of the proxied WebService class.

Cause  
=============================  
When the client uses the PreAuthenticate property, the client tries to re-negotiate the NTLM handshake with the Proxy. When the Proxy sees that the connection has already been authenticated, it simply ignores the re-negotiation and forwards a blank request &#8211; with Content-Length: 0 to the server. The server expects a valid Content-Length followed by a soap-envelope which it never receives and hence responds back with a HTTP 400: Bad Request response.

Resolution  
=============================  
Do not set the HttpWebRequest.PreAuthenticate property (set it to false) when calling the Webservice with the above configuration.&nbsp; By default, the PreAuthenticate is turned off and set to false.<p mce_keep="true">&nbsp;</p>