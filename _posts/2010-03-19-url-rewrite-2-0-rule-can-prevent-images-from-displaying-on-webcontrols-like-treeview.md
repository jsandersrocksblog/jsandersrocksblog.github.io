---
id: 673
title: URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView
date: 2010-03-19T06:41:08-05:00
author: jsanders
layout: post
guid: http://jsandersblog.azurewebsites.net/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/
permalink: /2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/
orig_url:
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
orig_site_id:
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
orig_post_id:
  - "9981828"
  - "9981828"
  - "9981828"
  - "9981828"
  - "9981828"
  - "9981828"
  - "9981828"
  - "9981828"
  - "9981828"
orig_parent_id:
  - "9981828"
  - "9981828"
  - "9981828"
  - "9981828"
  - "9981828"
  - "9981828"
  - "9981828"
  - "9981828"
  - "9981828"
orig_thread_id:
  - "707323"
  - "707323"
  - "707323"
  - "707323"
  - "707323"
  - "707323"
  - "707323"
  - "707323"
  - "707323"
orig_application_key:
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
orig_post_author_id:
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
orig_post_author_username:
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
orig_post_author_created:
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
orig_is_approved:
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
orig_attachment_count:
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
orig_url_title:
  - http://blogs.msdn.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview.aspx
opengraph_tags:
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta name="twitter:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta name="twitter:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta name="twitter:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta name="twitter:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta name="twitter:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta name="twitter:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta name="twitter:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta name="twitter:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="URL Rewrite 2.0 Rule can prevent Images from displaying on WebControls like TreeView" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2010/03/19/url-rewrite-2-0-rule-can-prevent-images-from-displaying-on-webcontrols-like-treeview/" />
    <meta name="twitter:description" content="I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like http://mysite/treepage.aspx?nodeName=RedColors to http://mysite/RedColors .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this..." />
    
categories:
  - Uncategorized
---
I was excited to try URL Rewrite to create some rules on my internal web site.&nbsp; I added a rule to map a query string like <http://mysite/treepage.aspx?nodeName=RedColors> to <http://mysite/RedColors> .&nbsp; After doing this I found that the images of the treeview web control now did not display.&nbsp; I enabled FREB tracing and found that this rule was translating webresource.axd improperly:

<samp><rule name=&#8221;RewriteUserFriendlyURL1&#8243; stopProcessing=&#8221;true&#8221;><br />&nbsp; <match url=&#8221;^([^/]+)/?$&#8221; /><br />&nbsp; <conditions><br />&nbsp;&nbsp;&nbsp; <add input=&#8221;{REQUEST_FILENAME}&#8221; matchType=&#8221;IsFile&#8221; negate=&#8221;true&#8221; /><br />&nbsp;&nbsp;&nbsp; <add input=&#8221;{REQUEST_FILENAME}&#8221; matchType=&#8221;IsDirectory&#8221; negate=&#8221;true&#8221; /><br /></samp> 

RequestURL&nbsp;&nbsp;&nbsp; <http://mysite:80/WebResource.axd?d=zGZU6qcW6fzAgYe-oI85v1qoiSgWelpv1EkImgNZdKA1&t=633802488069218315> 

RequestURL&nbsp;&nbsp;&nbsp; <http://mysite:80/treepage.aspx?nodeName=WebResource.axd&d=zGZU6qcW6fzAgYe-oI85v1qoiSgWelpv1EkImgNZdKA1&t=633802488069218315> 

Since the rule saw the ‘?’ char it was trying to map it.

To solve this add a rule to exclude processing of .axd files:

<samp><rule name=&#8221;RewriteUserFriendlyURL1&#8243; stopProcessing=&#8221;true&#8221;><br />&nbsp; <match url=&#8221;^([^/]+)/?$&#8221; /><br />&nbsp; <conditions><br />&nbsp;&nbsp;&nbsp; <add input=&#8221;{REQUEST_FILENAME}&#8221; matchType=&#8221;IsFile&#8221; negate=&#8221;true&#8221; /><br />&nbsp;&nbsp;&nbsp; <add input=&#8221;{REQUEST_FILENAME}&#8221; matchType=&#8221;IsDirectory&#8221; negate=&#8221;true&#8221; /><br />&nbsp;&nbsp;&nbsp; <!&#8211;&nbsp; The following condition prevents rule from rewriting requests to .axd files &#8211;><br />&nbsp;&nbsp;&nbsp; <add input=&#8221;{URL}&#8221; negate=&#8221;true&#8221; pattern=&#8221;\.axd$&#8221; /><br />&nbsp; </conditions><br /></samp> 

&nbsp;

Please let me know if you found this Post useful and if it solved your problem!