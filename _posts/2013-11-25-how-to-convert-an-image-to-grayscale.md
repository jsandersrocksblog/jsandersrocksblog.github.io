---
id: 173
title: 'How to: Convert an Image to Grayscale'
date: 2013-11-25T10:54:41-05:00
author: jsanders
layout: post
guid: http://jsandersblog.azurewebsites.net/2013/11/25/how-to-convert-an-image-to-grayscale/
permalink: /2013/11/25/how-to-convert-an-image-to-grayscale/
orig_url:
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.microsoft.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
orig_site_id:
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
  - "8394"
orig_post_id:
  - "10471302"
  - "10471302"
  - "10471302"
  - "10471302"
  - "10471302"
  - "10471302"
  - "10471302"
  - "10471302"
  - "10471302"
orig_parent_id:
  - "10471302"
  - "10471302"
  - "10471302"
  - "10471302"
  - "10471302"
  - "10471302"
  - "10471302"
  - "10471302"
  - "10471302"
orig_thread_id:
  - "858369"
  - "858369"
  - "858369"
  - "858369"
  - "858369"
  - "858369"
  - "858369"
  - "858369"
  - "858369"
orig_application_key:
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
orig_post_author_id:
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
  - "65385"
orig_post_author_username:
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
  - jpsanders
orig_post_author_created:
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
  - Jan 18 2007 01:34:53:000PM
orig_is_approved:
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
  - "1"
orig_attachment_count:
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
  - "0"
orig_url_title:
  - http://blogs.msdn.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
  - http://blogs.msdn.com/b/jpsanders/archive/2013/11/25/how-to-convert-an-image-to-grayscale.aspx
opengraph_tags:
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="How to: Convert an Image to Grayscale" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="How to: Convert an Image to Grayscale" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta name="twitter:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="How to: Convert an Image to Grayscale" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="How to: Convert an Image to Grayscale" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta name="twitter:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="How to: Convert an Image to Grayscale" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="How to: Convert an Image to Grayscale" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta name="twitter:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="How to: Convert an Image to Grayscale" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="How to: Convert an Image to Grayscale" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta name="twitter:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="How to: Convert an Image to Grayscale" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="How to: Convert an Image to Grayscale" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta name="twitter:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="How to: Convert an Image to Grayscale" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="How to: Convert an Image to Grayscale" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta name="twitter:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="How to: Convert an Image to Grayscale" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="How to: Convert an Image to Grayscale" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta name="twitter:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="How to: Convert an Image to Grayscale" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="How to: Convert an Image to Grayscale" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta name="twitter:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    
  - |
    <meta property="og:type" content="article" />
    <meta property="og:title" content="How to: Convert an Image to Grayscale" />
    <meta property="og:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta property="og:site_name" content="Http Client Protocol Issues (and other fun stuff I support)" />
    <meta property="og:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="How to: Convert an Image to Grayscale" />
    <meta name="twitter:url" content="https://blogs.msdn.microsoft.com/jpsanders/2013/11/25/how-to-convert-an-image-to-grayscale/" />
    <meta name="twitter:description" content="I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try! private async Task imageToGrayscale(Image src, Image dest) { RenderTargetBitmap renderTargetBitmap = new RenderTargetBitmap(); //Get existing src pixels in a Byte[] (always..." />
    
categories:
  - Uncategorized
tags:
  - Windows 8
  - Windows Store applications
  - XAML
---
I ran across an issue where I wanted to convert an Image in a Windows Store app&#160; to grayscale and could not find a great example.&#160; So… here is one for you to try!

<pre class="code"><span style="background: white; color: black;"> </span><span style="background: white; color: blue;">private async </span><span style="background: white; color: rgb(43, 145, 175);">Task </span><span style="background: white; color: black;">imageToGrayscale(</span><span style="background: white; color: rgb(43, 145, 175);">Image </span><span style="background: white; color: black;">src, </span><span style="background: white; color: rgb(43, 145, 175);">Image </span><span style="background: white; color: black;">dest)
        {
            </span><span style="background: white; color: rgb(43, 145, 175);">RenderTargetBitmap </span><span style="background: white; color: black;">renderTargetBitmap = </span><span style="background: white; color: blue;">new </span><span style="background: white; color: rgb(43, 145, 175);">RenderTargetBitmap</span><span style="background: white; color: black;">();
            </span><span style="background: white; color: green;">//Get existing src pixels in a Byte[] (always is BRGA formate
            </span><span style="background: white; color: blue;">await </span><span style="background: white; color: black;">renderTargetBitmap.RenderAsync(src);
            </span><span style="background: white; color: rgb(43, 145, 175);">IBuffer </span><span style="background: white; color: black;">pixelSrc = </span><span style="background: white; color: blue;">await </span><span style="background: white; color: black;">renderTargetBitmap.GetPixelsAsync();
            </span><span style="background: white; color: rgb(43, 145, 175);">Byte</span><span style="background: white; color: black;">[] destBytes = </span><span style="background: white; color: blue;">new </span><span style="background: white; color: rgb(43, 145, 175);">Byte</span><span style="background: white; color: black;">[pixelSrc.Length];
            </span><span style="background: white; color: blue;">for </span><span style="background: white; color: black;">(</span><span style="background: white; color: blue;">int </span><span style="background: white; color: black;">i = 0; i &lt; pixelSrc.Length; i += 4)
            {
                </span><span style="background: white; color: blue;">double </span><span style="background: white; color: black;">b = (</span><span style="background: white; color: blue;">double</span><span style="background: white; color: black;">)pixelSrc.GetByte((</span><span style="background: white; color: blue;">uint</span><span style="background: white; color: black;">)i) / 255.0;
                </span><span style="background: white; color: blue;">double </span><span style="background: white; color: black;">g = (</span><span style="background: white; color: blue;">double</span><span style="background: white; color: black;">)pixelSrc.GetByte((</span><span style="background: white; color: blue;">uint</span><span style="background: white; color: black;">)i+1) / 255.0;
                </span><span style="background: white; color: blue;">double </span><span style="background: white; color: black;">r = (</span><span style="background: white; color: blue;">double</span><span style="background: white; color: black;">)pixelSrc.GetByte((</span><span style="background: white; color: blue;">uint</span><span style="background: white; color: black;">)i+2) / 255.0;
                </span><span style="background: white; color: blue;">byte </span><span style="background: white; color: black;">a = pixelSrc.GetByte((</span><span style="background: white; color: blue;">uint</span><span style="background: white; color: black;">)i + 3);
                </span><span style="background: white; color: blue;">double </span><span style="background: white; color: black;">e = (0.21 * r + 0.71 * g + 0.07 * b) * 255;
                </span><span style="background: white; color: blue;">byte </span><span style="background: white; color: black;">f = </span><span style="background: white; color: rgb(43, 145, 175);">Convert</span><span style="background: white; color: black;">.ToByte(e);
                destBytes[i] = f;
                destBytes[i + 1] = f;
                destBytes[i + 2] = f;
                destBytes[i + 3] = a;
            }
            </span><span style="background: white; color: rgb(43, 145, 175);">WriteableBitmap </span><span style="background: white; color: black;">destWB = </span><span style="background: white; color: blue;">new </span><span style="background: white; color: rgb(43, 145, 175);">WriteableBitmap</span><span style="background: white; color: black;">(renderTargetBitmap.PixelWidth, renderTargetBitmap.PixelHeight);
            </span><span style="background: white; color: blue;">using </span><span style="background: white; color: black;">(</span><span style="background: white; color: rgb(43, 145, 175);">Stream </span><span style="background: white; color: black;">pixelStream = destWB.PixelBuffer.AsStream()) {
                pixelStream.Seek(0, </span><span style="background: white; color: rgb(43, 145, 175);">SeekOrigin</span><span style="background: white; color: black;">.Begin);
                pixelStream.Write(destBytes, 0, destBytes.Length);
                destWB.Invalidate();
            }
            destImage.Source = destWB;
        }</span></pre>

If you like it, drop me a note of thanks!